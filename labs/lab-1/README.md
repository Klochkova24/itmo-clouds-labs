# Лабораторная работа №1

## Введение

В данной лабораторной работе в качестве двух пет-проектов используются два скрипта на Python. Первый представляет из себя сервер, реализующий фронтенд, второй — реализующий бэкенд. Фронтенд возвращает HTML страницу, в которую встроен JS-скрипт. Этот скрипт запрашивает данные от бэкенда и выводит их на экран. Исходный код фронтенда и бэкенда находятся [здесь](frontend/server.py) и [здесь](backend/server.py) соответственно.

Для развертывания был арендован VDS-сервер, а также доменное имя `itmo-clouds-labs.ru`. Далее сервер и домен будут использоваться при настройке и развертывании Nginx.

Для доставки конфигурационных файлов до сервера использовался Git. С помощью утилиты командной строки данный репозиторий был склонирован на сервер. Все дальнейшие операции с файлами используют копию репозитория на сервере.

## Получение сертификатов

Лабораторная работа предполагает использование HTTPS-протокола для взаимодействия с сервером. Для использования HTTPS необходимо получить сертификаты.

Для получения сертификатов использовался certbot — утилита для получения сертификатов от Let's Encrypt. Let's Encrypt — это центр сертификации от некоммерческой организации ISRG, существующий при поддержке EFF и многих компаний, взявшей на себя миссию дать людям бесплатные SSL/TLS сертификаты для сайтов и серверов.

certbot был установлен следующим образом:

1. Установлены необходимые зависимости:

   ```bash
   sudo apt install python3 python3-venv libaugeas0
   ```

2. Создано виртуальное окружение:

   ```bash
   sudo python3 -m venv /opt/certbot/
   sudo /opt/certbot/bin/pip install --upgrade pip
   ```

3. Установлен certbox:

   ```bash
   sudo /opt/certbot/bin/pip install certbot
   ```

4. Создан алиас для утилиты:

   ```bash
   ln -s /opt/certbot/bin/certbot /usr/bin/certbot
   ```

## Настройка Nginx

Для настройки Nginx использовался следующий конфиг:

```nginx
server {}
```

В данном конфиге определяется два виртуальных хоста: `itmo-clouds-labs.ru` и `api.itmo-clouds-labs.ru` для обслуживания фронтенда и бэкенда соответственно. Для этих виртуальных хостов используются сертификаты для работы HTTPS, а также включено принудительное перенаправление с HTTP на HTTPS.

## Заключение

В данной лабораторной работе был настроен Nginx для обслуживания фронтенда и бэкенда по протоколу HTTPS. Для реализации фронтенда и бэкенда использовались скрипты на Python, а для получения сертификатов использовался certbot.
